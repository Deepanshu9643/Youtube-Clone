<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Video</title>
    <link rel="stylesheet" href="watch.css">
</head>
<body>
    <div id="video-container">
        <h1 id="videoTitle"></h1>
        <iframe id="videoPlayer" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p id="videoDescription"></p>
    </div>

    <h2>Recommended Videos</h2>
    <div id="recommended-videos"></div>

    <h2>Video Thumbnails</h2>
    <div class="video-results">
        <!-- Example video items with placeholder images -->
        <div class="video" onclick="loadVideo('videoId1')">
            <img src="https://via.placeholder.com/150" alt="Video 1">
            <p>Video Title 1</p>
        </div>
        <div class="video" onclick="loadVideo('videoId2')">
            <img src="https://via.placeholder.com/150" alt="Video 2">
            <p>Video Title 2</p>
        </div>
        <div class="video" onclick="loadVideo('videoId3')">
            <img src="https://via.placeholder.com/150" alt="Video 3">
            <p>Video Title 3</p>
        </div>
        <div class="video" onclick="loadVideo('videoId4')">
            <img src="https://via.placeholder.com/150" alt="Video 4">
            <p>Video Title 4</p>
        </div>
        <div class="video" onclick="loadVideo('videoId5')">
            <img src="https://via.placeholder.com/150" alt="Video 5">
            <p>Video Title 5</p>
        </div>
        <div class="video" onclick="loadVideo('videoId6')">
            <img src="https://via.placeholder.com/150" alt="Video 6">
            <p>Video Title 6</p>
        </div>
    </div>

    <script>
        // Load video data from localStorage
        const videoData = JSON.parse(localStorage.getItem('currentVideo'));

        if (videoData) {
            // Set video ID in iframe URL
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = `https://www.youtube.com/embed/${videoData.id.videoId}?autoplay=1`;

            // Set video title and description
            document.getElementById('videoTitle').innerText = videoData.snippet.title;
            document.getElementById('videoDescription').innerText = videoData.snippet.description;
        } else {
            document.body.innerHTML = "<h1>Video not found</h1>";
        }

        // Load the selected video into the player
        function loadVideo(videoId) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;

            // You can fetch and display the video title and description dynamically here as well
            const videoTitle = document.getElementById('videoTitle');
            const videoDescription = document.getElementById('videoDescription');

            // Example: setting hardcoded details or you can fetch via API if needed
            videoTitle.innerText = `Video Title for ${videoId}`;
            videoDescription.innerText = `Description for video with ID: ${videoId}`;
        }

        // Fetch recommended videos based on the current video ID
        const videoId = new URLSearchParams(window.location.search).get('videoId');
        if (videoId) {
            fetch(`https://www.googleapis.com/youtube/v3/search?key=YOUR_YOUTUBE_API_KEY&part=snippet&type=video&relatedToVideoId=${videoId}&maxResults=5`)
                .then(response => response.json())
                .then(data => {
                    displayRecommendations(data.items);
                })
                .catch(err => console.log(err));
        }

        // Function to display recommended videos
        function displayRecommendations(recommendations) {
            const recommendedVideos = document.getElementById('recommended-videos');
            recommendations.forEach(rec => {
                const recCard = document.createElement('div');
                recCard.className = 'recommendation-card';

                const recImg = document.createElement('img');
                recImg.src = rec.snippet.thumbnails.medium.url;
                recCard.appendChild(recImg);

                const recTitle = document.createElement('p');
                recTitle.innerText = rec.snippet.title;
                recCard.appendChild(recTitle);

                recCard.addEventListener("click", () => {
                    localStorage.setItem('currentVideo', JSON.stringify(rec));
                    window.location.href = `watch.html?videoId=${rec.id.videoId}`;
                });

                recommendedVideos.appendChild(recCard);
            });
        }
    </script>
</body>
</html>
